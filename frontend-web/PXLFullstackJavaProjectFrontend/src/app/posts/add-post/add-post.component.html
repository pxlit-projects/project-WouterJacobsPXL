<div class="add-post-container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Create New Blog Post</mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="postForm" (ngSubmit)="onSubmit()" class="post-form">
        <mat-form-field appearance="outline">
          <mat-label>Title</mat-label>
          <input matInput formControlName="title" placeholder="Enter post title">
          <mat-error *ngIf="postForm.get('title')?.invalid && postForm.get('title')?.touched">
            {{ getErrorMessage('title') }}
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Preview Content</mat-label>
          <textarea matInput formControlName="previewContent" placeholder="Enter preview content" rows="3"></textarea>
          <mat-error *ngIf="postForm.get('previewContent')?.invalid && postForm.get('previewContent')?.touched">
            {{ getErrorMessage('previewContent') }}
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Content</mat-label>
          <textarea matInput formControlName="content" placeholder="Enter post content" rows="10"></textarea>
          @if(postForm.get('content')?.invalid && postForm.get('content')?.touched){
            <mat-error>
              {{ getErrorMessage('content') }}
            </mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Image URL</mat-label>
          <input matInput formControlName="imageUrl" placeholder="https://example.com/image.jpg">
          @if(postForm.get('imageUrl')?.invalid && postForm.get('imageUrl')?.touched){
            <mat-error>
              {{ getErrorMessage('imageUrl') }}
            </mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Author ID</mat-label>
          <input matInput type="number" formControlName="authorId" placeholder="Enter author ID">
          @if(postForm.get('authorId')?.invalid && postForm.get('authorId')?.touched){
            <mat-error>
              {{ getErrorMessage('authorId') }}
            </mat-error>
          }
        </mat-form-field>

        <div class="form-actions">
          <button mat-button type="button" routerLink="/posts">
            Cancel
          </button>
          <button mat-raised-button color="primary" type="submit" [disabled]="isSubmitting">
            <mat-icon>post_add</mat-icon>
            {{ isSubmitting ? 'Creating...' : 'Create Post' }}
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>
